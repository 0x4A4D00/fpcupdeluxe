Index: compiler/systems/t_bsd.pas
===================================================================
--- compiler/systems/t_bsd.pas	(revision 36087)
+++ compiler/systems/t_bsd.pas	(working copy)
@@ -127,8 +127,11 @@
   Inherited Create;
   if not Dontlinkstdlibpath Then
    if not(target_info.system in systems_darwin) then
+     if not(target_info.system in systems_openbsd) then
      LibrarySearchPath.AddPath(sysrootpath,'/lib;/usr/lib;/usr/X11R6/lib',true)
    else
+       LibrarySearchPath.AddPath(sysrootpath,'/usr/lib;${X11BASE}/lib;${LOCALBASE}/lib',true)
+   else
      { Mac OS X doesn't have a /lib }
      LibrarySearchPath.AddPath(sysrootpath,'/usr/lib',true)
 end;
@@ -653,7 +656,8 @@
      { when we have -static for the linker the we also need libgcc }
      if (cs_link_staticflag in current_settings.globalswitches) then
       LinkRes.Add('-lgcc');
-     if linkdynamic and (Info.DynamicLinker<>'') then
+     if linkdynamic and (Info.DynamicLinker<>'') and
+        not(target_info.system in systems_openbsd) then
       LinkRes.AddFileName(Info.DynamicLinker);
      if not LdSupportsNoResponseFile then
        LinkRes.Add(')');
@@ -769,8 +773,7 @@
    end;
    
 { Use -nopie on OpenBSD }
-  if (target_info.system in systems_openbsd) and
-     (target_info.system <> system_x86_64_openbsd) then
+  if (target_info.system in systems_openbsd) then
     Info.ExtraOptions:=Info.ExtraOptions+' -nopie';
     
 { Write used files and libraries }
Index: packages/opengl/src/gl.pp
===================================================================
--- packages/opengl/src/gl.pp	(revision 36087)
+++ packages/opengl/src/gl.pp	(working copy)
@@ -2267,11 +2267,7 @@
   {$IFDEF MorphOS}
   InitTinyGLLibrary;
   {$ELSE}
-  {$ifdef haiku}
   LoadOpenGL('libGL.so');
-  {$else}
-  LoadOpenGL('libGL.so.1');
-  {$endif}
   {$ENDIF}
   {$endif}
   {$ENDIF OS2}
Index: packages/opengl/src/glu.pp
===================================================================
--- packages/opengl/src/glu.pp	(revision 36087)
+++ packages/opengl/src/glu.pp	(working copy)
@@ -76,16 +76,8 @@
 {$ifdef darwin}
   GLU_LIB =  '/System/Library/Frameworks/OpenGL.framework/Libraries/libGLU.dylib';
 {$else}
-{$IFDEF haiku}
   GLU_LIB = 'libGLU.so';
-{$ELSE}
-{$ifdef MorphOS}
-  GLU_LIB = 'tinygl.library';
-{$else}
-  GLU_LIB = 'libGLU.so.1';
-{$endif}
 {$ENDIF}
-{$ENDIF}
 {$ENDIF OS2}
 {$endif}
                               
Index: packages/opengl/src/glut.pp
===================================================================
--- packages/opengl/src/glut.pp	(revision 36087)
+++ packages/opengl/src/glut.pp	(working copy)
@@ -768,13 +768,7 @@
   {$ifdef darwin}
   LoadGlut('/System/Library/Frameworks/GLUT.framework/GLUT');
   {$else}
-  {$IFDEF haiku}
   LoadGlut('libglut.so');
-  {$ELSE}
-  {$IFNDEF MORPHOS}
-  LoadGlut('libglut.so.3');
-  {$ENDIF}
-  {$ENDIF}
   {$endif}
   {$ENDIF OS2}
   {$ENDIF}
Index: packages/pastojs/Makefile
===================================================================
--- packages/pastojs/Makefile	(revision 36087)
+++ packages/pastojs/Makefile	(working copy)
@@ -2,8 +2,8 @@
 # Don't edit, this file is generated by FPCMake Version 2.0.0 [2017-04-18 rev 35825]
 #
 default: all
-MAKEFILETARGETS=i386-linux i386-go32v2 i386-win32 i386-os2 i386-freebsd i386-beos i386-haiku i386-netbsd i386-solaris i386-qnx i386-netware i386-openbsd i386-wdosx i386-darwin i386-emx i386-watcom i386-netwlibc i386-wince i386-embedded i386-symbian i386-nativent i386-iphonesim i386-android i386-aros m68k-linux m68k-freebsd m68k-netbsd m68k-amiga m68k-atari m68k-openbsd m68k-palmos m68k-embedded powerpc-linux powerpc-netbsd powerpc-amiga powerpc-macos powerpc-darwin powerpc-morphos powerpc-embedded powerpc-wii powerpc-aix sparc-linux sparc-netbsd sparc-solaris sparc-embedded x86_64-linux x86_64-freebsd x86_64-netbsd x86_64-solaris x86_64-openbsd x86_64-darwin x86_64-win64 x86_64-embedded x86_64-iphonesim x86_64-aros x86_64-dragonfly arm-linux arm-palmos arm-darwin arm-wince arm-gba arm-nds arm-embedded arm-symbian arm-android arm-aros powerpc64-linux powerpc64-darwin powerpc64-embedded powerpc64-aix avr-embedded armeb-linux armeb-embedded mips-linux mipsel-linux mipsel-embedded mipsel-android jvm-java jvm-android i8086-embedded i8086-msdos i8086-win16 aarch64-linux aarch64-darwin wasm-wasm
-BSDs = freebsd netbsd openbsd darwin dragonfly
+MAKEFILETARGETS=i386-linux i386-go32v2 i386-win32 i386-os2 i386-freebsd i386-beos i386-haiku i386-netbsd i386-solaris i386-qnx i386-netware i386-wdosx i386-darwin i386-emx i386-watcom i386-netwlibc i386-wince i386-embedded i386-symbian i386-nativent i386-iphonesim i386-android i386-aros m68k-linux m68k-freebsd m68k-netbsd m68k-amiga m68k-atari m68k-palmos m68k-embedded powerpc-linux powerpc-netbsd powerpc-amiga powerpc-macos powerpc-darwin powerpc-morphos powerpc-embedded powerpc-wii powerpc-aix sparc-linux sparc-netbsd sparc-solaris sparc-embedded x86_64-linux x86_64-freebsd x86_64-netbsd x86_64-solaris x86_64-darwin x86_64-win64 x86_64-embedded x86_64-iphonesim x86_64-aros x86_64-dragonfly arm-linux arm-palmos arm-darwin arm-wince arm-gba arm-nds arm-embedded arm-symbian arm-android arm-aros powerpc64-linux powerpc64-darwin powerpc64-embedded powerpc64-aix avr-embedded armeb-linux armeb-embedded mips-linux mipsel-linux mipsel-embedded mipsel-android jvm-java jvm-android i8086-embedded i8086-msdos i8086-win16 aarch64-linux aarch64-darwin wasm-wasm
+BSDs = freebsd netbsd darwin dragonfly
 UNIXs = linux $(BSDs) solaris qnx haiku aix
 LIMIT83fs = go32v2 os2 emx watcom msdos win16
 OSNeedsComspecToRunBatch = go32v2 watcom
Index: packages/pastojs/fpmake.pp
===================================================================
--- packages/pastojs/fpmake.pp	(revision 36087)
+++ packages/pastojs/fpmake.pp	(working copy)
@@ -19,7 +19,7 @@
 {$endif ALLPACKAGES}
 
     P.Version:='3.1.1';
-    P.OSes := AllOses-[embedded,msdos,win16];
+    P.OSes := AllOses-[embedded,msdos,win16,openbsd];
     P.Dependencies.Add('fcl-js');
     P.Dependencies.Add('fcl-passrc');
 
Index: rtl/bsd/ostypes.inc
===================================================================
--- rtl/bsd/ostypes.inc	(revision 36087)
+++ rtl/bsd/ostypes.inc	(working copy)
@@ -87,6 +87,9 @@
         st_qspare1    : cint64;            // was recursive change detect
         st_qspare2    : cint64;
 {$else dragonfly}
+{$ifdef openbsd}
+	st_mode       : mode_t;             // inode protection mode
+{$endif}
         st_dev        : dev_t;             // inode's device
 {$ifdef darwin_new_iostructs}
         st_mode       : mode_t;            // inode protection mode
@@ -99,7 +102,9 @@
         st_ino        : ino_t;             // inode's number
 {$else not netbsd}
         st_ino        : ino_t;             // inode's number
+{$ifndef openbsd}
         st_mode       : mode_t;            // inode protection mode
+{$endif}
 {$endif not netbsd}
         st_nlink      : nlink_t;           // number of hard links
 {$endif}
@@ -106,9 +111,6 @@
         st_uid        : uid_t;             // user ID of the file's owner
         st_gid        : gid_t;             // group ID of the file's group
         st_rdev       : dev_t;             // device type
-{$ifdef openbsd}
-        st_padd0      : cint;
-{$endif}
         st_atime      : time_t;            // time of last access
         st_atimensec  : clong;             // nsec of last access
         st_mtime      : time_t;            // time of last data modification
@@ -156,10 +158,18 @@
    end;
 {$else}
    dirent  = record
+{$ifdef openbsd}
+	d_fileno      : ino_t;
+	d_off         : off_t;
+{$else}
         d_fileno      : cuint32;                        // file number of entry
+{$endif}
         d_reclen      : cuint16;                        // length of this record
         d_type        : cuint8;                         // file type, see below
         d_namlen      : cuint8;                         // length of string in d_name
+{$ifdef openbsd}
+	d_padding     : array[1..4] of cuint8;
+{$endif}
         d_name        : array[0..(255 + 1)-1] of char;  // name must be no longer than this
    end;
 {$endif}
@@ -185,6 +195,11 @@
         dd_size   : clong;        // amount of data returned by getdirentries
         dd_buf    : pchar;        // data buffer
         dd_len    : cint;         // size of data buffer
+{$ifdef openbsd}
+	dd_curpos : off_t;
+	dd_lock   : pointer;
+	dd_rewind : clong;
+{$else}
 {$ifdef netbsdpowerpc}
         dd_pad1   : cint;
         dd_seek   : cint64;        // magic cookie returned by getdirentries
@@ -197,6 +212,7 @@
         __dd_lock : pthread_mutex_t; // for thread locking
         __dd_td : pointer;        // telldir position recording
 {$endif}
+{$endif not openbsd}
    end;
    TDir    = dir;
    pDir    = ^dir;
Index: rtl/openbsd/i386/cprt0.as
===================================================================
--- rtl/openbsd/i386/cprt0.as	(revision 36087)
+++ rtl/openbsd/i386/cprt0.as	(working copy)
@@ -6,6 +6,14 @@
 	.ascii "OpenBSD\0"
 	.long	0
 	.previous
+	.section ".note.openbsd.ident", "a"
+	.p2align 2
+	.long	8
+	.long	4
+	.long	1
+	.ascii "OpenBSD\0"
+	.long	0
+	.previous
 	.file	"crt0.c"
 gcc2_compiled.:
 .data
@@ -108,7 +116,7 @@
 	movb $0,(%edx)
 	movl $__progname_storage,__progname
 .L3:
-	call __init
+#	call __init
 	subl $16,%esp
 	pushl %eax
 	movl 8(%ebp),%eax
Index: rtl/openbsd/i386/prt0.as
===================================================================
--- rtl/openbsd/i386/prt0.as	(revision 36087)
+++ rtl/openbsd/i386/prt0.as	(working copy)
@@ -6,6 +6,14 @@
 	.ascii "OpenBSD\0"
 	.long	0
 	.previous
+	.section ".note.openbsd.ident", "a"
+	.p2align 2
+	.long	8
+	.long	4
+	.long	1
+	.ascii "OpenBSD\0"
+	.long	0
+	.previous
 	.file	"crt0.c"
 gcc2_compiled.:
 .data
Index: rtl/openbsd/x86_64/cprt0.as
===================================================================
--- rtl/openbsd/x86_64/cprt0.as	(revision 36087)
+++ rtl/openbsd/x86_64/cprt0.as	(working copy)
@@ -6,6 +6,14 @@
 	.ascii "OpenBSD\0"
 	.long	0
 	.previous
+	.section ".note.openbsd.ident", "a"
+	.p2align 2
+	.long	8
+	.long	4
+	.long	1
+	.ascii "OpenBSD\0"
+	.long	0
+	.previous
 	.file	"crt0.c"
 	.globl	__progname
 	.section	.rodata
Index: rtl/openbsd/x86_64/gprt0.as
===================================================================
--- rtl/openbsd/x86_64/gprt0.as	(revision 36087)
+++ rtl/openbsd/x86_64/gprt0.as	(working copy)
@@ -1,3 +1,11 @@
+	.section ".note.openbsd.ident", "a"
+	.p2align 2
+	.long	8
+	.long	4
+	.long	1
+	.ascii "OpenBSD\0"
+	.long	0
+	.previous
 	.file	"crt0.c"
 	.globl	__progname
 	.section	.rodata
Index: rtl/openbsd/x86_64/prt0.as
===================================================================
--- rtl/openbsd/x86_64/prt0.as	(revision 36087)
+++ rtl/openbsd/x86_64/prt0.as	(working copy)
@@ -6,6 +6,14 @@
 	.ascii "OpenBSD\0"
 	.long	0
 	.previous
+	.section ".note.openbsd.ident", "a"
+	.p2align 2
+	.long	8
+	.long	4
+	.long	1
+	.ascii "OpenBSD\0"
+	.long	0
+	.previous
 	.file	"crt0.c"
 	.globl	__progname
 	.section	.rodata
